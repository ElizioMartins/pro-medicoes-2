<div class="login-container">
  <app-card class="login-card">
    <div class="login-header">
      <h1>MediSmart</h1>
      <p>Sistema de Medição de Consumíveis</p>
    </div>
    
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <div class="form-group">
        <app-input
          label="Email"
          type="email"
          formControlName="username"
          [error]="!!(loginForm.get('username')?.invalid && loginForm.get('username')?.touched)"
          [errorMessage]="loginForm.get('username')?.errors?.['required'] ? 'Email é obrigatório' : ''"
        ></app-input>
      </div>
        <div class="form-group">
        <app-input
          label="Senha"
          type="password"
          formControlName="password"
          [error]="!!(loginForm.get('password')?.invalid && loginForm.get('password')?.touched)"
          [errorMessage]="loginForm.get('password')?.errors?.['required'] ? 'Senha é obrigatória' : ''"
        ></app-input>
      </div>
      
      <div *ngIf="errorMessage" class="error-message" style="color: #dc2626; margin-bottom: 1rem;">
        {{ errorMessage }}
      </div>
        <app-button 
        type="submit" 
        variant="primary"
        [disabled]="loginForm.invalid || isSubmitting"
        [loading]="isSubmitting"
        class="login-button"
      >
        Entrar
      </app-button>
      
      <!-- Debug info (remover em produção) -->
      <div class="debug-info" style="margin-top: 1rem; padding: 1rem; background: #f3f4f6; border-radius: 4px; font-size: 0.875rem;">
        <div>Form Valid: {{ loginForm.valid }}</div>
        <div>Form Invalid: {{ loginForm.invalid }}</div>
        <div>Username: {{ loginForm.get('username')?.value }}</div>
        <div>Password: {{ loginForm.get('password')?.value }}</div>
        <div>Username Valid: {{ loginForm.get('username')?.valid }}</div>
        <div>Password Valid: {{ loginForm.get('password')?.valid }}</div>
        <div>Button Disabled: {{ loginForm.invalid || isSubmitting }}</div>
      </div>
    </form>
  </app-card>
</div>
